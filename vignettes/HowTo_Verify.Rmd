---
title: "How to verify submission files"
author: "Reich Lab"
date: "3/13/2020"
output: pdf_document
---

There are 2 ways to verify submission files in the cdcForecastUtils package. First, we need to load the following packages:

```{r setup, include=T}
library(cdcForecastUtils)
library(dplyr)
```

Then, choose how to verify using the methods in the examples below.

# 1. Verify with `verify_entry_file()`

This method verifies using a file path without reading in the forecasts into R environment.


```{r, eval=FALSE}

# For national/Regional-level forecasts
weekly_forecast_filepath1 <- "/directory/EW10-2020-regional_forecast_file.csv"
verify_entry_file(weekly_forecast_filepath1)

# For state-level forecasts
weekly_forecast_filepath2 <- "/directory/EW10-2020-state_forecast_file.csv"
verify_entry_file(weekly_forecast_filepath2, challenge = "state_ili")

```


# 2. Verify with `verify_entry()`

This method is almost the same as the previous method, except the forecasts are read into R environment with `read_entry()`, which the user can inspect if the verification were to fail. Note that the "forecast_week" column is added with `read_entry()`, which will be seen in the data frame (not in the original .csv file), so that we can later score the forecasts. This does not affect verification process.


```{r, eval=FALSE}

# For national/Regional-level forecasts
weekly_forecast_file1 <- read_entry("/directory/EW10-2020-regional_forecast_file.csv")
verify_entry(weekly_forecast_file1)

# For state-level forecasts
weekly_forecast_file2 <- read_entry("/directory/EW10-2020-state_forecast_file.csv")
verify_entry(weekly_forecast_file2)

```

For both methods, there will be no errors if the forecast file is formatted correctly. Please refer to the template for more details regarding formatting. Note that there could be warnings or/and messages for missing locations or/and missing targets, which can be ignored if the forecasts for those targets or/and locations are intentionally not included. 